<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <!-- struts2中改变struts.xml默认路径, 这些本来struts会自动加载的文件，需要手动加载include。参考：http://my.oschina.net/jawayjiang/blog/88077 -->
    <include file="struts-default.xml" />
    <include file="struts-plugin.xml" />

    <constant name="struts.velocity.toolboxlocation" value="WEB-INF/velocity/toolbox.xml" />
    <constant name="struts.velocity.configfile" value="WEB-INF/velocity/velocity.properties" />

    <constant name="struts.action.extension" value="" />
    <constant name="struts.custom.properties" value="classpath:/struts.properties" />
    <constant name="struts.objectFactory"
        value="org.apache.struts2.spring.StrutsSpringObjectFactory" />
    <constant name="struts.patternMatcher" value="namedVariable" />
    <constant name="struts.action.excludePattern" value=".*/js/.*,.*/css/.*,.*/img/.*,.*/font/.*" />

    <constant name="struts.enable.SlashesInActionNames" value="true" />
    <constant name="struts.mapper.alwaysSelectFullNamespace"
        value="false" />
    <constant name="struts.patternMatcher" value="regex" />

    <package name="softbalance" namespace="/" extends="struts-default">

        <result-types>
            <result-type name="velocity"
                class="com.dianping.phoenix.lb.action.VelocityLayoutResult" />
        </result-types>

        <interceptors>
            <interceptor-stack name="myStack">
                <interceptor-ref name="timer" />
                <interceptor-ref name="logger" />
                <interceptor-ref name="defaultStack" />
            </interceptor-stack>
        </interceptors>

        <action name="/{virtualServerName}/{tabName}" class="mainAction">
            <result name="success" type="velocity">
                /container.htm
            </result>
            <!-- <param name="virtualServerName">{1}</param> <param name="tabName">{2}</param> -->
        </action>

        <action name="/{virtualServerName}" class="mainAction">
            <result name="success" type="velocity">
                /container.htm
            </result>
            <param name="tabName">rules</param>
        </action>

    </package>

</struts>